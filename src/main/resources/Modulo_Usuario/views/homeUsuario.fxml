<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ProgressBar?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>

<AnchorPane prefHeight="640.0" prefWidth="360.0" style="-fx-background-color: #424874;" xmlns="http://javafx.com/javafx/24.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="Modulo_Usuario.Controladores.HomeUsuarioController">

    <!-- Top Bar Simple y elegante -->
    <HBox alignment="CENTER" prefHeight="65" style="-fx-background-color: linear-gradient(to right, #DCD6F7, #A6B1E1); -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.15), 6, 0.3, 0, 3);" AnchorPane.leftAnchor="0" AnchorPane.rightAnchor="0" AnchorPane.topAnchor="0">
        <padding>
            <Insets bottom="12" left="25" right="25" top="12" />
        </padding>

        <!-- Logo/Icono izquierda -->
        <Label style="-fx-font-size: 26px;" text="💻" HBox.hgrow="NEVER" />

        <!-- Espacio flexible -->
        <Region HBox.hgrow="ALWAYS" />

        <!-- Título centrado -->
        <Label style="-fx-text-fill: #424874; -fx-font-size: 22px; -fx-font-weight: bold; -fx-font-family: 'Segoe UI', Arial, sans-serif;" text="Hello Code" />

        <!-- Espacio flexible -->
        <Region HBox.hgrow="ALWAYS" />

        <!-- Botón salir derecha -->
        <Button fx:id="btnSalir" onAction="#cerrarSesion" onMouseEntered="#onMouseEnteredSalir" onMouseExited="#onMouseExitedSalir" prefHeight="44" prefWidth="44" style="-fx-background-color: #e74c3c; -fx-text-fill: white; -fx-font-size: 18px; -fx-font-weight: bold; -fx-background-radius: 22; -fx-border-radius: 22; -fx-padding: 10 12 10 12; -fx-effect: dropshadow(gaussian, rgba(231,76,60,0.4), 5, 0.3, 0, 3); -fx-cursor: hand;" text="🚪" HBox.hgrow="NEVER" />
    </HBox>

    <!-- Contenido principal -->
    <ScrollPane fitToWidth="true" style="-fx-background: transparent; -fx-background-color: transparent;" AnchorPane.bottomAnchor="80" AnchorPane.leftAnchor="0" AnchorPane.rightAnchor="0" AnchorPane.topAnchor="75">
        <VBox fx:id="contentContainer" alignment="TOP_CENTER" spacing="25" style="-fx-padding: 25;">

            <!-- Bienvenida moderna -->
            <VBox alignment="CENTER" maxWidth="330" spacing="12" style="-fx-background-color: linear-gradient(to bottom right, #DCD6F7, #CACFD6); -fx-background-radius: 20; -fx-padding: 25; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.15), 8, 0.4, 0, 3);">
                <Label style="-fx-text-fill: #424874; -fx-font-size: 24px; -fx-font-weight: bold; -fx-font-family: 'Segoe UI', sans-serif;" text="¡Bienvenido de vuelta!" />
                <Label style="-fx-text-fill: #6B7A99; -fx-font-size: 14px; -fx-font-family: 'Segoe UI', sans-serif;" text="Continúa tu aprendizaje de Java" textAlignment="CENTER" wrapText="true" />
                <HBox alignment="CENTER" spacing="8" style="-fx-padding: 8 0 0 0;">
                    <Label style="-fx-font-size: 18px;" text="🔥" />
                    <Label style="-fx-text-fill: #424874; -fx-font-size: 14px; -fx-font-weight: bold;" text="100 XP" fx:id="xpLabel" />
                </HBox>
            </VBox>

            <!-- Progreso diario elegante -->
            <VBox maxWidth="330" spacing="15" style="-fx-background-color: linear-gradient(to bottom right, #A6B1E1, #DCD6F7); -fx-background-radius: 20; -fx-padding: 25; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.15), 8, 0.4, 0, 3);">
                <HBox alignment="CENTER_LEFT" spacing="8">
                    <Label style="-fx-font-size: 20px;" text="🎯" />
                    <Label style="-fx-text-fill: #424874; -fx-font-size: 18px; -fx-font-weight: bold; -fx-font-family: 'Segoe UI', sans-serif;" text="Progreso de hoy" />
                </HBox>
                <VBox spacing="8">
                    <ProgressBar prefHeight="10" prefWidth="280" progress="0.7" style="-fx-accent: #424874; -fx-background-radius: 5; -fx-background-color: rgba(255,255,255,0.3);" />
                    <Label style="-fx-text-fill: #424874; -fx-font-size: 13px; -fx-font-weight: normal;" text="7 de 10 ejercicios completados" />
                </VBox>
            </VBox>

            <!-- Accesos rápidos -->
            <VBox alignment="CENTER" maxWidth="320" spacing="12">
                <Label style="-fx-text-fill: #DCD6F7; -fx-font-size: 16px; -fx-font-weight: bold;" text="Accesos rápidos" />

                <HBox alignment="CENTER" spacing="15">
                    <VBox alignment="CENTER" prefWidth="90" spacing="8" style="-fx-background-color: #50C878; -fx-background-radius: 12; -fx-padding: 15; -fx-effect: dropshadow(gaussian, #424874, 4, 0.2, 0, 2);">
                        <Label style="-fx-font-size: 24px; -fx-text-fill: white;" text="📚" />
                        <Label style="-fx-text-fill: white; -fx-font-size: 10px; -fx-font-weight: bold;" text="Lecciones" textAlignment="CENTER" />
                    </VBox>

                    <VBox alignment="CENTER" prefWidth="90" spacing="8" style="-fx-background-color: #3498DB; -fx-background-radius: 12; -fx-padding: 15; -fx-effect: dropshadow(gaussian, #424874, 4, 0.2, 0, 2);">
                        <Label style="-fx-font-size: 24px; -fx-text-fill: white;" text="💻" />
                        <Label style="-fx-text-fill: white; -fx-font-size: 10px; -fx-font-weight: bold;" text="Ejercicios" textAlignment="CENTER" />
                    </VBox>

                    <VBox alignment="CENTER" prefWidth="90" spacing="8" style="-fx-background-color: #F1C40F; -fx-background-radius: 12; -fx-padding: 15; -fx-effect: dropshadow(gaussian, #424874, 4, 0.2, 0, 2);">
                        <Label style="-fx-font-size: 24px; -fx-text-fill: white;" text="📊" />
                        <Label style="-fx-text-fill: white; -fx-font-size: 10px; -fx-font-weight: bold;" text="Progreso" textAlignment="CENTER" />
                    </VBox>
                </HBox>
            </VBox>

            <!-- Racha -->
            <HBox alignment="CENTER" maxWidth="320" spacing="15" style="-fx-background-color: #DCD6F7; -fx-background-radius: 16; -fx-padding: 20; -fx-effect: dropshadow(gaussian, #424874, 6, 0.2, 0, 2);">
                <VBox alignment="CENTER" spacing="4">
                    <Label style="-fx-font-size: 32px;" text="🔥" />
                    <Label style="-fx-text-fill: #424874; -fx-font-size: 12px; -fx-font-weight: bold;" text="Racha" />
                </VBox>
                <VBox spacing="4" HBox.hgrow="ALWAYS">
                    <Label style="-fx-text-fill: #424874; -fx-font-size: 16px; -fx-font-weight: bold;" text="5 días consecutivos" />
                    <Label style="-fx-text-fill: #6B7A99; -fx-font-size: 12px;" text="¡Sigue así para mantener tu racha!" wrapText="true" />
                </VBox>
            </HBox>

            <!-- Botón continuar -->
            <Button onAction="#irALecciones" prefHeight="50" prefWidth="250" style="-fx-background-color: #A6B1E1; -fx-text-fill: #424874; -fx-font-weight: bold; -fx-background-radius: 25; -fx-font-size: 16px; -fx-effect: dropshadow(gaussian, #424874, 6, 0.2, 0, 2);" text="Continuar aprendiendo" />

        </VBox>
    </ScrollPane>

    <!-- Bottom Navigation Bar con 4 módulos -->
    <HBox alignment="CENTER" prefHeight="80" spacing="15" style="-fx-background-color: #A6B1E1; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.2), 5, 0.3, 0, -2);" AnchorPane.bottomAnchor="0" AnchorPane.leftAnchor="0" AnchorPane.rightAnchor="0">
        <padding>
            <Insets bottom="12" left="15" right="15" top="12" />
        </padding>

        <Button fx:id="btnHome" onAction="#irAHome" prefHeight="55" prefWidth="70" style="-fx-background-color: white; -fx-text-fill: #50C878; -fx-font-size: 12px; -fx-font-weight: bold; -fx-background-radius: 18; -fx-border-radius: 18; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.15), 5, 0.3, 0, 2); -fx-cursor: hand; -fx-padding: 8;" text="🏠&#10;Inicio" HBox.hgrow="ALWAYS" />

        <Button fx:id="btnPerfil2" onAction="#irAPerfil" prefHeight="55" prefWidth="70" style="-fx-background-color: white; -fx-text-fill: #3498DB; -fx-font-size: 12px; -fx-font-weight: bold; -fx-background-radius: 18; -fx-border-radius: 18; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.15), 5, 0.3, 0, 2); -fx-cursor: hand; -fx-padding: 8;" text="👤&#10;Perfil" HBox.hgrow="ALWAYS" />

        <Button fx:id="btnRanking" onAction="#irARanking" prefHeight="55" prefWidth="70" style="-fx-background-color: white; -fx-text-fill: #F1C40F; -fx-font-size: 12px; -fx-font-weight: bold; -fx-background-radius: 18; -fx-border-radius: 18; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.15), 5, 0.3, 0, 2); -fx-cursor: hand; -fx-padding: 8;" text="🏆&#10;Ranking" HBox.hgrow="ALWAYS" />

        <Button fx:id="btnComunidad" onAction="#irAComunidad" prefHeight="55" prefWidth="70" style="-fx-background-color: white; -fx-text-fill: #9B59B6; -fx-font-size: 12px; -fx-font-weight: bold; -fx-background-radius: 18; -fx-border-radius: 18; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.15), 5, 0.3, 0, 2); -fx-cursor: hand; -fx-padding: 8;" text="👥&#10;Comunidad" HBox.hgrow="ALWAYS" />
        <Button fx:id="btnHomeUsuario" layoutX="112.0" layoutY="22.0" onAction="#irAHomeUsuario" prefHeight="55" prefWidth="70" style="-fx-background-color: white; -fx-text-fill: #3498DB; -fx-font-size: 12px; -fx-font-weight: bold; -fx-background-radius: 18; -fx-border-radius: 18; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.15), 5, 0.3, 0, 2); -fx-cursor: hand; -fx-padding: 8;" text="👤&#10;Usuario" />
    </HBox>

    <!-- Botón cerrar sesión (oculto, accesible desde perfil) -->
    <Button onAction="#cerrarSesion" text="Cerrar Sesión" visible="false" />

</AnchorPane>