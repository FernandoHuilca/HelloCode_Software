<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.image.*?>
<?import javafx.scene.text.*?>
<?import java.net.URL?>

<AnchorPane xmlns="http://javafx.com/javafx"
      xmlns:fx="http://javafx.com/fxml"
      fx:controller="Gamificacion_Modulo.controllers.RankingController"
      prefWidth="360.0"
      prefHeight="720.0"
      minWidth="360.0"
      minHeight="720.0"
      maxWidth="360.0"
      maxHeight="720.0"
      style="-fx-background-color: #424874;">
      
   <stylesheets>
      <URL value="@../styles/styles.css"/>
   </stylesheets>

   <!-- Contenido principal en ScrollPane -->
   <ScrollPane fitToWidth="true" style="-fx-background: transparent; -fx-background-color: transparent;" AnchorPane.bottomAnchor="80" AnchorPane.leftAnchor="0" AnchorPane.rightAnchor="0" AnchorPane.topAnchor="0">
      <VBox alignment="TOP_CENTER" spacing="10" style="-fx-padding: 0;">
         
         <!-- Header Section with Profile Picture -->
         <StackPane fx:id="headerSection" prefHeight="272.0">
            <!-- Purple Background -->
            <Region prefHeight="195.0" style="-fx-background-color: #424874;" />
            
            <!-- Profile Picture -->
            <ImageView fx:id="profilePicture" fitHeight="174.0" fitWidth="180.0" preserveRatio="true">
               <image>
                  <Image url="@../images/Top.png" />
               </image>
               <StackPane.margin>
                  <Insets top="50.0" />
               </StackPane.margin>
            </ImageView>
         </StackPane>
         
         <!-- Title Label -->
         <Label fx:id="titleLabel" text="Cargando posición..." 
                style="-fx-font-family: 'Inter Bold'; -fx-font-size: 25px; -fx-font-weight: bold; -fx-text-fill: white;" 
                alignment="CENTER" wrapText="true">
            <padding>
               <Insets top="20.0" bottom="10.0" left="20.0" right="20.0" />
            </padding>
         </Label>
         
         <!-- User Selector -->
         <VBox alignment="CENTER">
            <padding>
               <Insets bottom="15.0" left="20.0" right="20.0" />
            </padding>
            <Label text="Ver posición de:" style="-fx-font-size: 12px; -fx-text-fill: white; -fx-font-weight: bold;"/>
            <ComboBox fx:id="usuarioSelector" onAction="#cambiarUsuario" prefWidth="200" 
                      style="-fx-font-size: 12px; -fx-background-color: white; -fx-text-fill: #424874; -fx-border-color: #A6B1E1; -fx-border-width: 1; -fx-border-radius: 5; -fx-background-radius: 5;">
               <VBox.margin>
                  <Insets top="5.0" />
               </VBox.margin>
            </ComboBox>
         </VBox>
         
         <!-- Ranking Section Container -->
         <VBox fx:id="rankingSectionContainer" alignment="CENTER" maxHeight="1.7976931348623157E308">
            <padding>
               <Insets top="20.0" bottom="20.0" left="28.0" right="28.0" />
            </padding>
            
            <!-- Ranking List Container -->
            <VBox fx:id="rankingContainer" maxWidth="337.0" alignment="CENTER"
                  style="-fx-background-color: #DCD6F7; -fx-border-color: #A6B1E1; -fx-border-width: 2; -fx-background-radius: 10; -fx-border-radius: 10; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.3), 15, 0.4, 0, 3);">
               <padding>
                  <Insets top="20.0" bottom="20.0" left="20.0" right="20.0" />
               </padding>
               
               <!-- Dynamic ranking entries will be added here by controller -->
               <ScrollPane fx:id="rankingScrollPane" fitToWidth="true" hbarPolicy="NEVER" vbarPolicy="AS_NEEDED" maxHeight="300.0">
                  <VBox fx:id="rankingEntriesContainer" spacing="20.0" />
               </ScrollPane>
            </VBox>
         </VBox>
         
      </VBox>
   </ScrollPane>

    <!-- Bottom Navigation Bar con 5 botones -->
    <HBox alignment="CENTER" prefHeight="80" spacing="15" style="-fx-background-color: #A6B1E1; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.2), 5, 0.3, 0, -2);" AnchorPane.bottomAnchor="0" AnchorPane.leftAnchor="0" AnchorPane.rightAnchor="0">
        <padding>
            <Insets bottom="12" left="15" right="15" top="12" />
        </padding>
        
        <Button fx:id="btnHome" onAction="#irAHome" prefHeight="55" prefWidth="70" style="-fx-background-color: white; -fx-text-fill: #424874; -fx-font-size: 12px; -fx-font-weight: bold; -fx-background-radius: 18; -fx-border-radius: 18; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.15), 5, 0.3, 0, 2); -fx-cursor: hand; -fx-padding: 8;" text="🏠&#10;Inicio" HBox.hgrow="ALWAYS" />
                
        <Button fx:id="btnPerfil2" onAction="#irAPerfil" prefHeight="55" prefWidth="70" style="-fx-background-color: white; -fx-text-fill: #424874; -fx-font-size: 12px; -fx-font-weight: bold; -fx-background-radius: 18; -fx-border-radius: 18; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.15), 5, 0.3, 0, 2); -fx-cursor: hand; -fx-padding: 8;" text="👤&#10;Perfil" HBox.hgrow="ALWAYS" />
                
        <Button fx:id="btnRanking" onAction="#irARanking" prefHeight="55" prefWidth="70" style="-fx-background-color: white; -fx-text-fill: #424874; -fx-font-size: 12px; -fx-font-weight: bold; -fx-background-radius: 18; -fx-border-radius: 18; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.15), 5, 0.3, 0, 2); -fx-cursor: hand; -fx-padding: 8;" text="🏆&#10;Ranking" HBox.hgrow="ALWAYS" />
                
        <Button fx:id="btnComunidad" onAction="#irAComunidad" prefHeight="55" prefWidth="70" style="-fx-background-color: white; -fx-text-fill: #424874; -fx-font-size: 12px; -fx-font-weight: bold; -fx-background-radius: 18; -fx-border-radius: 18; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.15), 5, 0.3, 0, 2); -fx-cursor: hand; -fx-padding: 8;" text="👥&#10;Comunidad" HBox.hgrow="ALWAYS" />
      <Button fx:id="btnHomeUsuario" layoutX="112.0" layoutY="22.0" onAction="#irAHomeUsuario" prefHeight="55" prefWidth="70" style="-fx-background-color: white; -fx-text-fill: #424874; -fx-font-size: 12px; -fx-font-weight: bold; -fx-background-radius: 18; -fx-border-radius: 18; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.15), 5, 0.3, 0, 2); -fx-cursor: hand; -fx-padding: 8;" text="👤&#10;Usuario" />
    </HBox>

</AnchorPane> 