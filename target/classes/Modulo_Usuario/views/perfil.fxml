<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<AnchorPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="Modulo_Usuario.Controladores.PerfilController"
            prefWidth="360" prefHeight="640"
            style="-fx-background-color: linear-gradient(to bottom, #424874, #363B5E);">

    <!-- Top Bar actualizado -->
    <HBox style="-fx-background-color: linear-gradient(to right, #DCD6F7, #A6B1E1); 
                 -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.15), 6, 0.3, 0, 3);" 
          AnchorPane.leftAnchor="0" AnchorPane.rightAnchor="0" AnchorPane.topAnchor="0" prefHeight="65" alignment="CENTER">
        <padding>
            <Insets top="12" right="25" bottom="12" left="25"/>
        </padding>

        <!-- Botón back circular -->
        <Button fx:id="btnBack" text="⬅" onAction="#goBack"
                style="-fx-background-color: #e74c3c; 
                       -fx-text-fill: white; 
                       -fx-font-size: 18px; 
                       -fx-font-weight: bold;
                       -fx-background-radius: 50; 
                       -fx-border-radius: 50;
                       -fx-effect: dropshadow(gaussian, rgba(231,76,60,0.4), 5, 0.3, 0, 3);
                       -fx-cursor: hand;
                       -fx-padding: 10;"
                prefWidth="44" prefHeight="44"/>

        <!-- Espacio flexible -->
        <Region HBox.hgrow="ALWAYS"/>

        <!-- Título centrado -->
        <Label text="Mi Perfil" style="-fx-text-fill: #424874; 
                                     -fx-font-size: 22px; 
                                     -fx-font-weight: bold; 
                                     -fx-font-family: 'Segoe UI', Arial, sans-serif;"/>

        <!-- Espacio flexible -->
        <Region HBox.hgrow="ALWAYS"/>

        <!-- Icono perfil animado -->
        <Label text="🎭" style="-fx-font-size: 32px; 
                             -fx-effect: dropshadow(gaussian, rgba(255,255,255,0.8), 6, 0.3, 0, 2);"/>
    </HBox>

    <!-- ScrollPane transparente - CORREGIDO: topAnchor cambiado de 70 a 80 -->
    <ScrollPane AnchorPane.topAnchor="90" AnchorPane.leftAnchor="0" AnchorPane.rightAnchor="0" 
                AnchorPane.bottomAnchor="0" fitToWidth="true"
                style="-fx-background: transparent; 
                       -fx-background-color: transparent;
                       -fx-focus-color: transparent;
                       -fx-faint-focus-color: transparent;">
        
        <VBox spacing="25" alignment="TOP_CENTER" style="-fx-padding: 30 20 40 20;">
            
            <!-- Avatar principal más pequeño -->
            <VBox alignment="CENTER" spacing="15" 
                  style="-fx-background-color: linear-gradient(to bottom right, #DCD6F7, #A6B1E1); 
                         -fx-background-radius: 25; 
                         -fx-padding: 25 20 25 20; 
                         -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.3), 15, 0.5, 0, 6);
                         -fx-border-color: rgba(255,255,255,0.6);
                         -fx-border-width: 2;
                         -fx-border-radius: 25;" 
                  maxWidth="280">
                
                <!-- Avatar con múltiples capas -->
                <VBox alignment="CENTER" spacing="0">
                    <!-- Anillo exterior -->
                    <VBox alignment="CENTER" 
                          style="-fx-background-color: linear-gradient(from 0% 0% to 100% 100%, #A6B1E1, #8A96C7, #CACFD6, #DCD6F7); 
                                 -fx-background-radius: 50; 
                                 -fx-padding: 4;
                                 -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.4), 10, 0.4, 0, 4);"
                          prefWidth="100" prefHeight="100">
                        
                        <!-- Avatar interno -->
                        <VBox alignment="CENTER" 
                              style="-fx-background-color: rgba(255,255,255,0.95); 
                                     -fx-background-radius: 46; 
                                     -fx-padding: 15;
                                     -fx-border-color: rgba(255,255,255,0.8);
                                     -fx-border-width: 2;
                                     -fx-border-radius: 46;"
                              prefWidth="92" prefHeight="92">
                            <Label text="👨‍💻" style="-fx-font-size: 40px; 
                                                 -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.3), 3, 0.3, 0, 2);"/>
                        </VBox>
                    </VBox>
                </VBox>
                
                <!-- Nombre con efectos -->
                <VBox alignment="CENTER" spacing="8">
                    <Label text="¡Hola!" 
                           style="-fx-text-fill: #5A6B7D; 
                                  -fx-font-size: 14px; 
                                  -fx-font-weight: 500;
                                  -fx-font-family: 'Segoe UI', sans-serif;"/>
                    <Label fx:id="lblUsername" text="" 
                           style="-fx-text-fill: #2C3142; 
                                  -fx-font-size: 24px; 
                                  -fx-font-weight: 700; 
                                  -fx-font-family: 'Segoe UI Semibold', sans-serif;
                                  -fx-effect: dropshadow(gaussian, rgba(255,255,255,0.8), 2, 0.3, 0, 1);"/>
                </VBox>
            </VBox>

            <!-- Estadísticas XP -->
            <VBox spacing="15" 
                  style="-fx-background-color: linear-gradient(to bottom right, #A6B1E1, #CACFD6); 
                         -fx-background-radius: 25; 
                         -fx-padding: 25; 
                         -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.2), 12, 0.5, 0, 5);
                         -fx-border-color: rgba(255,255,255,0.6); 
                         -fx-border-width: 1;
                         -fx-border-radius: 25;" 
                  maxWidth="320">
                
                <HBox alignment="CENTER_LEFT" spacing="12">
                    <Label text="🏆" style="-fx-font-size: 24px; 
                                         -fx-effect: dropshadow(gaussian, rgba(255,215,0,0.8), 6, 0.4, 0, 2);"/>
                    <Label text="Experiencia" 
                           style="-fx-text-fill: #2C3142; 
                                  -fx-font-size: 20px; 
                                  -fx-font-weight: 700; 
                                  -fx-font-family: 'Segoe UI Semibold', sans-serif;
                                  -fx-effect: dropshadow(gaussian, rgba(255,255,255,0.8), 2, 0.3, 0, 1);"/>
                </HBox>
                
                <!-- Barra de progreso visual -->
                <VBox spacing="10" alignment="CENTER">
                    <Label fx:id="lblXp" text="1,250 XP" 
                           style="-fx-text-fill: #424874; 
                                  -fx-font-size: 36px; 
                                  -fx-font-weight: 700; 
                                  -fx-font-family: 'Segoe UI Black', sans-serif;
                                  -fx-effect: dropshadow(gaussian, rgba(255,215,0,0.6), 4, 0.4, 0, 2);"/>
                    
                    <!-- Barra de progreso personalizada -->
                    <HBox alignment="CENTER" spacing="0" style="-fx-padding: 5 0 5 0;">
                        <VBox style="-fx-background-color: rgba(255,255,255,0.4); 
                                     -fx-background-radius: 10; 
                                     -fx-padding: 0;" 
                              prefWidth="200" prefHeight="8">
                            <VBox style="-fx-background-color: linear-gradient(to right, #A6B1E1, #8A96C7, #CACFD6); 
                                         -fx-background-radius: 10;" 
                                  prefWidth="140" prefHeight="8"/>
                        </VBox>
                    </HBox>
                    
                    <Label text="¡Sigue aprendiendo para ganar más puntos!" 
                           style="-fx-text-fill: #5A6B7D; 
                                  -fx-font-size: 13px; 
                                  -fx-font-weight: 500;" 
                           textAlignment="CENTER" wrapText="true"/>
                </VBox>
            </VBox>

            <!-- Información personal -->
            <VBox spacing="20" 
                  style="-fx-background-color: linear-gradient(to bottom right, #DCD6F7, #A6B1E1); 
                         -fx-background-radius: 25; 
                         -fx-padding: 25; 
                         -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.2), 12, 0.5, 0, 5);
                         -fx-border-color: rgba(255,255,255,0.6);
                         -fx-border-width: 1;
                         -fx-border-radius: 25;" 
                  maxWidth="320">
                
                <HBox alignment="CENTER_LEFT" spacing="12">
                    <Label text="📝" style="-fx-font-size: 24px; 
                                         -fx-effect: dropshadow(gaussian, rgba(255,255,255,0.8), 4, 0.3, 0, 1);"/>
                    <Label text="Información personal" 
                           style="-fx-text-fill: #2C3142; 
                                  -fx-font-size: 18px; 
                                  -fx-font-weight: 700; 
                                  -fx-font-family: 'Segoe UI Semibold', sans-serif;
                                  -fx-effect: dropshadow(gaussian, rgba(255,255,255,0.8), 2, 0.3, 0, 1);"/>
                </HBox>
                
                <!-- Campos de información -->
                <VBox spacing="15">
                    <!-- Nombre completo -->
                    <VBox spacing="8">
                        <Label text="Nombre completo" 
                               style="-fx-text-fill: #5A6B7D; 
                                      -fx-font-size: 12px; 
                                      -fx-font-weight: 500;"/>
                        <Label fx:id="lblNombre" text="" 
                               style="-fx-text-fill: #2C3142; 
                                      -fx-font-size: 16px; 
                                      -fx-font-weight: 600;
                                      -fx-background-color: rgba(166,177,225,0.2);
                                      -fx-background-radius: 10;
                                      -fx-padding: 12;" />
                    </VBox>
                    
                    <!-- Email -->
                    <VBox spacing="8">
                        <Label text="Correo electrónico" 
                               style="-fx-text-fill: #5A6B7D; 
                                      -fx-font-size: 12px; 
                                      -fx-font-weight: 500;"/>
                        <Label fx:id="lblEmail" text="" 
                               style="-fx-text-fill: #2C3142; 
                                      -fx-font-size: 16px; 
                                      -fx-font-weight: 600;
                                      -fx-background-color: rgba(166,177,225,0.2);
                                      -fx-background-radius: 10;
                                      -fx-padding: 12;" 
                               wrapText="true"/>
                    </VBox>
                </VBox>
            </VBox>

        </VBox>
    </ScrollPane>

</AnchorPane>